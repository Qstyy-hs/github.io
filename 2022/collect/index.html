<!DOCTYPE html>
<html lang=zh-CN>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        渗透测试——信息收集 - Kmoon
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
    <link href="//at.alicdn.com/t/font_620856_28hi1hpxx24.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
<script type="text/javascript" src="https://cdn.lanluo.cn/js/canvas-nest.min.js"></script>
<body>
    <script type="text/javascript" src="https://cdn.lanluo.cn/js/canvas-nest.min.js"></script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?cb7a49e4f6a740b15e6fd25de2803712";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 千山同一月 万物皆清明 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="/img/avatar.png" />
        </div>
        <div class="name">
            <i>Kmoon</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-bg" id="search-bg"></div>
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 千山同一月 万物皆清明 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        <div class="post-container">
    <div class="post-title">
        渗透测试——信息收集
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2022-09-26 12:59:40</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#Sec" title="Sec">Sec</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <p>信息收集</p>
<p>2022年8月15日</p>
<p>（1）学号、工号、电话、邮箱、默认密码、身份证信息等等。</p>
<p>（2）子域名、旁站、C段、站点下的目录文件、JS接口等等。</p>
<p>（3）每个子站的配置环境、用的系统或者是CMS、系统的默认密码等等。</p>
<p>（4）有些学校的网站系统是外包给别的公司开发的，有时候可以从系统开发公司下手。</p>
<p>fofa语句（查找edu里的管理系统）:</p>
<p>“管理系统” &amp;&amp; org=”China Education and Research Network Center”</p>
<p>使用Google语法进行收集：</p>
<p>site:”edu.cn”</p>
<p>inurl:login|admin|manage|member|admin_login|login_admin|system|login|user|main|cms</p>
<p>查找文本内容：</p>
<p>site:域名 intext:管理|后台|登陆|用户名|密码|验证码|系统|帐号|admin|login|sys|managetem|password|username</p>
<p>查找可注入点：site:域名 inurl:aspx|jsp|php|asp</p>
<p>查找上传漏洞：site:域名 inurl:file|load|editor|Files</p>
<p>找eweb编辑器：</p>
<p>site:域名 inurl:ewebeditor|editor|uploadfile|eweb|edit</p>
<p>存在的数据库：site:域名 filetype:mdb|asp|#</p>
<p>查看脚本类型：site:域名 filetype:asp/aspx/php/jsp</p>
<p>迂回策略入侵：inurl:cms/data/templates/images/index/</p>
<p>ICP备案查询：<a href="https://icp.aizhan.com/">https://icp.aizhan.com</a></p>
<p>权重查询：<a href="https://rank.aizhan.com/www.wondercv.com/">https://rank.aizhan.com/www.wondercv.com/</a></p>
<p>多地ping：<a href="https://www.ping.cn/d">https://www.ping.cn/d</a></p>
<p>whois查询：<a href="https://www.whois365.com/cn/ip/119.23.74.200">https://www.whois365.com/cn/ip/119.23.74.200</a></p>
<p>IP反查：<a href="https://www.ip138.com/iplookup.asp?ip=166.111.53.94&amp;action=2">https://www.ip138.com/iplookup.asp?ip=166.111.53.94&amp;action=2</a></p>
<p>以xxx公司为例，根域名：xxx.cn</p>
<p>信息收集可以从多个领域来看：公司，子公司，域名，子域名，IPV4，IPV6，小程序，APP，PC软件等等</p>
<p>可以重点关注备案网站，APP，小程序，微信公众号，甚至是微博。</p>
<p>这里说一点小思路，首先可以找到官网，用cmd ping他的官网，可以看到IP地址，然后可以定位whois，whois中包含了用户、邮箱，以及购买的网段。</p>
<p>有了网段就可以进行一些主动信息收集，可以使用一些强大的资产测绘工具，goby的资产测绘还是很不错的，会有一些web服务，不用担心没有banner，往往这些没有banner的才有问题。</p>
<p>注意观察一下网站底部是否有技术支持：xxxx|网站建设：xxxx之类的标注，一些建站企业会出于知识产权保护或者是对外宣传自己的公司，会在自家搭建的网站上挂上技术支持等之类的标注，很多建站企业往往某种类型的网站都是套用的同一套源码，换汤不换药，运气不错的话，那我们的事件就秒变通用。</p>
<p>谷歌语法</p>
<p>sql注入</p>
<p>inurl:php?id=</p>
<p>inurl:asp?id</p>
<p>inurl:Show.asp?ID=</p>
<p>inurl：xxx.edu.cn 学号</p>
<p>地区inurl:”type_id=1”</p>
<p>行业inurl:”ptherinfo.asp?id=1”</p>
<p>还可以将php替换为asp、aspx、jsp等站点。</p>
<p>Xss:</p>
<p>地区inurl:”search?kw=”、inurl:’Product.asp?BigClassName’</p>
<p>任意注册</p>
<p>地区/行业inurl:”register”、地区/行业inurl:”regp.asp”、Reg.asp、userreg.asp、reg1.asp</p>
<p>CMS通杀</p>
<p>建议可以去一些漏洞文库，</p>
<p>建议多进行漏洞复现，多实战，多积累实战经验，复现漏洞也是一种积累。</p>
<p>弱口令</p>
<p>山西inurl:”后台”</p>
<p>账号：admin/test/cs/ceshi/test01等 密码：admin/123456/a123456/admin123/admin123456等。</p>
<p>也可以借助fofa对后台站点进行搜索：title=”后台管理” &amp;&amp; country=”CN”</p>
<p>Site：.edu.cn 登录 注册 忘记密码</p>
<p>site：.edu.cn 缴费</p>
<p>批量查询语法</p>
<p>site:edu.cn inurl:/payment intitle:大学缴费平台</p>
<p>子域名收集</p>
<p>在线子域名收集</p>
<p><a href="https://phpinfo.me/domain/">https://phpinfo.me/domain/</a></p>
<p>Fofa语法：</p>
<p>body=”xxx系统” &amp;&amp; org=”China Education and Research Network Center”</p>
<p>goby</p>
<p>登陆处没有验证码，可爆破</p>
<p>找到规则：</p>
<p>（1）账户：xxxx+学号</p>
<p>（2）密码：默认密码一般来说是身份证后6位，也可能是xxxx+身份证后6位</p>
<p>（3）学号：这个最好自己能收集到，一般是：入学年份+专业编码+数字</p>
<p>弱口令123456、123456789</p>
<p>越权漏洞</p>
<p>越权修改其他账户的密码</p>
<p>loginname传参</p>
<p>whois查找网站 注册邮箱，手机号</p>
<p>post型是是sql注入</p>
<p>存储型xss</p>
<p>c段扫描</p>
<p>1.登陆</p>
<p>登陆处一般会出现</p>
<p>sql注入</p>
<p>如果密码错误，修改返回包，返回一个其他人正常登录的返回包进行逃逸</p>
<p>反射xss</p>
<p>越权 抓返回包 具体参数如：role,roleid,user,admin,id,manage</p>
<p>信息泄露 极有可能泄露该账号的全部信息 但是前端只显示了部分</p>
<p>  无验证码可爆破</p>
<p>  验证码登陆爆破(4位，或长期有效)</p>
<p>  验证码登陆绕过</p>
<p>  验证码在返回包</p>
<p>  短信轰炸</p>
<p>  邮箱轰炸</p>
<p>  sesslon覆盖</p>
<p>  万能密码</p>
<p>  post注入</p>
<p>  xss</p>
<p>2.注册</p>
<p>  任意用户注册</p>
<p>  注册覆盖</p>
<p>  验证码在返回包</p>
<p>  短信轰炸</p>
<p>  邮箱轰炸</p>
<p>  xss</p>
<p>3.密码找回</p>
<p>  任意用户密码重置</p>
<p>  密保问题在前端源码</p>
<p>  验证码爆破</p>
<p>  手机号码篡改为自己的接收短信验证码</p>
<p>  邮箱篡改为自己的接收短信验证码</p>
<p>忘记密码处可能存在：</p>
<p>sql注入</p>
<p>任意密码修改 如果没有二次验证这个洞基本就存在</p>
<p>反射xss</p>
<p>信息泄露</p>
<p>验证码爆破</p>
<p>验证码轰炸</p>
<p>4.会员系统(报名系统)</p>
<p>  用户越权访问</p>
<p>  订单越权查看修改</p>
<p>  收货地址越权查看修改</p>
<p>  资料越权查看修改</p>
<p>  换绑手机号码短信轰炸</p>
<p>  水平垂直越权</p>
<p>  接口查询</p>
<p>  数据泄露</p>
<p>  文件上传</p>
<p>  资料处xss</p>
<p>  csrf</p>
<p>5.支付系统</p>
<p>  商品价格修改</p>
<p>  优惠卷数量修改</p>
<p>  折扣修改</p>
<p>  商品数量修改</p>
<p>  支付金额修改</p>
<p>  积分修改</p>
<p>  收货地址越权遍历</p>
<p>  订单查看</p>
<p>  备注处xss</p>
<p>  支付成功订单重放</p>
<p>  优惠数量限制突破</p>
<p>第一种思路：批量挖</p>
<p>0day、Nday刷</p>
<p>利用工具：</p>
<p>Fofamap：一款利用fofa api收集url的工具 还可以进行漏洞扫描，nuclei扫描</p>
<p>前提：需要fofa高级会员（或者使用url采集器）</p>
<p>fofa语法：</p>
<p>tittle=”职业学院” &amp;&amp; status_code=”200”</p>
<p>host=”.edu.cn” &amp;&amp; status_code=”200”</p>
<p>采集完url后，可以跑一遍nuclei</p>
<p>接下来可以用afrog，一款批量跑poc的工具</p>
<p>第二种思路：外网挖掘</p>
<p>没有学校的VPN，只能在外网进行挖掘，首先进行信息收集</p>
<p>先挖最简单的洞，身份证信息泄露</p>
<p>利用Google黑客语法：site:xxx.edu.cn 身份证</p>
<p>该语法可以用必应，谷歌，百度搜索</p>
<p>如果查到未打码的身份证信息，低危信息泄露提交</p>
<p>收集学号</p>
<p>Site:xxx.edu.cn 学号</p>
<p>收集完之后开始找站</p>
<p>如果进不去统一认证的话，先找外围资产</p>
<p>Site://xxx.edu.cn 注册/忘记密码/登录等等</p>
<p>去这种有输入框的地方找可以爆破的点，或者用语法去搜站点默认密码</p>
<p>尝试爆破，基本可以爆出来几个弱口令</p>
<p>如果可以注册，那就自己注册，进行挖掘</p>
<p>登录网站后，开始挖洞</p>
<p>打开burp，从点击登录的开始就要开始抓包</p>
<p>不要放过任何一个返回包</p>
<p>任何功能点都不要放过，任何一个逻辑点不要放过</p>
<p>edu最多的就是信息泄露，逻辑漏洞</p>
<p>任何可以跳转的地方，都有可能存在信息泄露，越权</p>
<p>sql注入 凡是和数据库交互的地方都可能存在</p>
<p>Xss 文件上传黑白名单，文件名绕过，csrf等具体的owasp10</p>
<p>某个边缘资产用了什么cms，百度一下它的漏洞，exp</p>
<p>必须要会的手法，看js文件</p>
<p>有时候它的js文件里面会存在许多敏感信息</p>
<p>甚至是要学会自己拼凑前端想要的一些值</p>
<p>找js文件接口的工具：<strong>jsFinder</strong></p>
<p><strong>目录扫描</strong> <strong>端口扫描都是必要的</strong></p>
<p>最后尝试搜索学校的小程序，公众号</p>
<p>挖的最多的洞是信息泄露，其次逻辑漏洞，未授权，sql 注入</p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
        <div id="lv-container"></div>
        <div class="giscus"></div>
    </div>
</div>
<script type="text/javascript" src="https://cdn.lanluo.cn/js/canvas-nest.min.js"></script>
    </div>
</div>

<footer class="footer">
    <ul class="list-inline text-center">
        
        

        
        <li>
            <a target="_blank" href="http://weibo.com/2438257908">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank"  href="https://github.com/kmoonn">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
    </p>
</footer>
<script type="text/javascript" src="https://cdn.lanluo.cn/js/canvas-nest.min.js"></script>
<script type="text/javascript" src="https://cdn.lanluo.cn/js/canvas-nest.min.js"></script>
<script type="text/javascript" src="https://cdn.lanluo.cn/js/canvas-nest.min.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":220,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






</html>
